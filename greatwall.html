<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>é•¿åŸ</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f8;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #005bbb;
    }
    .player-section {
      max-width: 700px;
      margin: 0 auto;
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .controls, .pinyin-toggle, .subtitle-box, .question-section {
      margin-top: 20px;
    }
    .controls label {
      font-weight: bold;
    }
    .subtitle-box {
      background-color: #f0f0f0;
      padding: 15px;
      border-radius: 5px;
      font-size: 16px;
      line-height: 1.6;
    }
    .question {
      margin-top: 20px;
    }
    .options button {
      display: block;
      margin: 6px 0;
      padding: 8px;
      border: 1px solid #ccc;
      background: #fff;
      cursor: pointer;
    }
    .options button.correct {
      background-color: #c8f7c5;
    }
    .options button.wrong {
      background-color: #f7c5c5;
    }
    .explanation {
      font-size: 14px;
      margin-top: 6px;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>é•¿åŸ</h1>
  <div class="player-section">
    <audio id="audioPlayer" controls>
      <source src="audio/greatwall.mp3" type="audio/mpeg">
      æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
    </audio>

    <div class="controls">
      <label for="speedRange">æ’­æ”¾é€Ÿåº¦ï¼š<span id="speedDisplay">1.00x</span></label><br>
      <input type="range" id="speedRange" min="0.5" max="2" step="0.05" value="1" oninput="updateSpeed(this.value)" />
    </div>

    <div class="pinyin-toggle">
      <button onclick="togglePinyin()">åˆ‡æ¢æ‹¼éŸ³æ˜¾ç¤º</button>
    </div>

    <div class="subtitle-box">
      <div id="subtitleText">ï¼ˆæ­¤å¤„å°†åŠ è½½å­—å¹•ï¼‰</div>
    </div>

    <div class="question-section">
      <h3>ğŸ“ å¬åŠ›ç†è§£ç»ƒä¹ </h3>

      <div class="question" id="q1">
        <p>1. é•¿åŸæœ€ä¸»è¦çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
        <div class="options">
          <button onclick="checkAnswer(this, 'q1', 'B')">A. å†œä¸šçŒæº‰ç³»ç»Ÿ</button>
          <button onclick="checkAnswer(this, 'q1', 'B')">B. å¤ä»£é˜²å¾¡å·¥ç¨‹</button>
          <button onclick="checkAnswer(this, 'q1', 'B')">C. ç‹å®«å±…ä½åŒºåŸŸ</button>
          <button onclick="checkAnswer(this, 'q1', 'B')">D. æ–‡åŒ–èŠ‚åº†åœºæ‰€</button>
        </div>
        <div class="explanation" id="exp-q1" style="display:none;">âœ… ç­”æ¡ˆï¼šB<br>ğŸ“˜ è§£æï¼šæ–‡ä¸­æŒ‡å‡ºâ€œé•¿åŸæ˜¯ä¸­å›½å¤ä»£çš„é˜²å¾¡å·¥ç¨‹â€ã€‚</div>
      </div>

      <div class="question" id="q2">
        <p>2. å…³äºé•¿åŸçš„è·¯çº¿ï¼Œä¸‹åˆ—å“ªé¡¹æ­£ç¡®ï¼Ÿ</p>
        <div class="options">
          <button onclick="checkAnswer(this, 'q2', 'C')">A. åªç©¿è¿‡åŸå¸‚åœ°åŒº</button>
          <button onclick="checkAnswer(this, 'q2', 'C')">B. ä½äºæµ·è¾¹åœ°åŒº</button>
          <button onclick="checkAnswer(this, 'q2', 'C')">C. ç©¿è¶Šé«˜å±±å’Œæ²™æ¼ </button>
          <button onclick="checkAnswer(this, 'q2', 'C')">D. æ²¿æ²³è€Œå»º</button>
        </div>
        <div class="explanation" id="exp-q2" style="display:none;">âœ… ç­”æ¡ˆï¼šC<br>ğŸ“˜ è§£æï¼šåŸæ–‡è¯´â€œå®ƒèœ¿èœ’èµ·ä¼ï¼Œç©¿è¶Šé«˜å±±å’Œæ²™æ¼ â€ã€‚</div>
      </div>

      <div class="question" id="q3">
        <p>3. é•¿åŸåœ¨æ–‡åŒ–ä¸Šå…·æœ‰æ€æ ·çš„æ„ä¹‰ï¼Ÿ</p>
        <div class="options">
          <button onclick="checkAnswer(this, 'q3', 'B')">A. æ˜¯ä¸€å¤„ä½“è‚²èµ›äº‹åœºåœ°</button>
          <button onclick="checkAnswer(this, 'q3', 'B')">B. æ˜¯ä¸­åæ–‡æ˜çš„é‡è¦è±¡å¾</button>
          <button onclick="checkAnswer(this, 'q3', 'B')">C. æ˜¯ç°ä»£äº¤é€šè¦é“</button>
          <button onclick="checkAnswer(this, 'q3', 'B')">D. æ˜¯è‡ªç„¶é£æ™¯åèƒœ</button>
        </div>
        <div class="explanation" id="exp-q3" style="display:none;">âœ… ç­”æ¡ˆï¼šB<br>ğŸ“˜ è§£æï¼šåŸæ–‡ç›´æ¥è¯´â€œé•¿åŸæ˜¯ä¸­åæ–‡æ˜çš„é‡è¦è±¡å¾â€ã€‚</div>
      </div>

      <div class="question" id="q4">
        <p>4. ä»¥ä¸‹å“ªé¡¹ä¸æ˜¯æåˆ°çš„é•¿åŸç‰¹å¾ï¼Ÿ</p>
        <div class="options">
          <button onclick="checkAnswer(this, 'q4', 'C')">A. èœ¿èœ’èµ·ä¼</button>
          <button onclick="checkAnswer(this, 'q4', 'C')">B. ç©¿è¶Šé«˜å±±</button>
          <button onclick="checkAnswer(this, 'q4', 'C')">C. å»ºäºç°ä»£</button>
          <button onclick="checkAnswer(this, 'q4', 'C')">D. æ˜¯é˜²å¾¡å·¥ç¨‹</button>
        </div>
        <div class="explanation" id="exp-q4" style="display:none;">âœ… ç­”æ¡ˆï¼šC<br>ğŸ“˜ è§£æï¼šéŸ³é¢‘ä¸­å¼ºè°ƒâ€œå¤ä»£é˜²å¾¡å·¥ç¨‹â€ï¼Œä¸æ˜¯ç°ä»£å»ºé€ ã€‚</div>
      </div>
    </div>
  </div>

  <script>
    function updateSpeed(rate) {
      const speed = parseFloat(rate);
      document.getElementById('audioPlayer').playbackRate = speed;
      document.getElementById('speedDisplay').innerText = speed.toFixed(2) + "x";
    }

    let showingPinyin = false;
    function togglePinyin() {
      fetch(showingPinyin ? 'subtitles/greatwall.txt' : 'subtitles/greatwall_pinyin.html')
        .then(res => res.text())
        .then(data => {
          const box = document.getElementById('subtitleText');
          showingPinyin ? box.innerText = data : box.innerHTML = data;
          showingPinyin = !showingPinyin;
        })
        .catch(() => {
          document.getElementById('subtitleText').innerText = 'ï¼ˆå­—å¹•åŠ è½½å¤±è´¥ï¼‰';
        });
    }

    window.onload = () => {
      fetch('subtitles/greatwall.txt')
        .then(res => res.text())
        .then(text => {
          document.getElementById('subtitleText').innerText = text;
        });
    };

    function checkAnswer(button, questionId, correctAnswer) {
      const allOptions = button.parentElement.querySelectorAll('button');
      allOptions.forEach(btn => {
        btn.disabled = true;
        if (btn.innerText.startsWith(correctAnswer)) {
          btn.classList.add('correct');
        } else {
          btn.classList.add('wrong');
        }
      });
      document.getElementById('exp-' + questionId).style.display = 'block';
    }
  </script>
</body>
</html>
